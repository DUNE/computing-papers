\documentclass[pdftex,12pt,letter]{article}
\usepackage[margin=0.75in]{geometry}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{xspace}
\usepackage{cite}
\usepackage{url}
\usepackage[pdftex,pdfpagelabels,bookmarks,hyperindex,hyperfigures]{hyperref}


\title{Basic Requirements for the Hardware/Construction Database Systems in DUNE}
\date{\today}
\author{D.\,Arkhipkin, M.\,Potekhin, B.\,Viren}


\begin{document}
\maketitle

\begin{abstract}
\noindent  The DUNE experiment requires systems and tools for management, control
and accounting  in the areas of manufacturing, QC, logistics, installation and maintenance.
These systems will include hardware/QC/construction/installation and other databases.
It is important to ensure proper integration, interconnectivity and interoperability of these
databases  as well as interfaces to other systems such as calibration, slow controls etc.
It is also important to make it possible to describe the evolution of various hardware modules
in time in terms of their composition (e.g. circuits replaced) and potentially structure.
We consider basic requirements to the databases and their interfaces  in the context
presented above, as well as basic implication for their design.

%Actual design and technology downselect are outside of the scope of this document.

\end{abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Overview}

The most recent experience in DUNE with systems of this kind comes from the protoDUNE-SP
experiment. The experiment employed several hardware/QC databases which were distinct
for a few elements of the apparatus. For example, the Cold Electronics QC systems were designed specifically
for purposes of testing and quality control of the novel Cold Electronics and as such provided ample capabilities
for storing and analysis of the data collected.

Other databases existed (sometimes as prorotypes) to be used in manufacturing, transport and installation of the PD
paddles, APA/CPA and the TPC components were different in many regards and based on the platform commonly
referred to as ``FNAL hardware DB'' \cite{hardwareDB}. In each database, relationships between individual components
and modules are described by reference utilizing a consistent set of primary IDs, specific for the particular DB.

The DUNE experiment represents a vastly larger scale in terms of the component count,
overall complexity and significantly more challenging installation procedures. Optimal execution
of manufacturing, installation, commissioning and operations will require a well thought out design
the databases in the context presented here. For these reasons it is necessary to define a
basic set of requirements and design criteria in this work area.

\section{Components and Aggregations}
\subsection{Tree model of the detector}

It is natural to describe the DUNE apparatus and its parts in terms of hierarchy of elements e.g. model
these as trees. For example a FEMB can be modeled as an aggregation which contains various electronics
components e.g. ASICS, and specifically as a tree. This approach was used in the DB schemas of the
database tables for protoDUNE-SP elements such as CPA, Photon Detector etc.

Most components (parts) are aggregates themselves. Definining the levels of the hierarchical structure
of components in DUNE is beyond the scope of this paper, we just note here that this will need to be
done in the design phase.

\subsection{Basic Requirements}

In the following, we consider the following basic requirements regarding information about components and their relationships:

\begin{itemize}

\item Every component used in DUNE needs to be \textit{uniquely identifiable}, described in the
system and accompanied by information with content specific to the component and its state, and level
of detail necessary to ensure successful manufacture, QC, delivery, assembly, installation, commissioning
and operation and maintenance of DUNE

\item Likewise, \textit{associations} of the components need to be \textit{uniquely identifiable} and described
in the system in ways specific to each situation; ``association'' may mean an assembly or aggregation of
components in a hierarchical manner e.g.\,electronic components installed on a FEMB

%, or in terms of point-to-point connections between components or subsystems

\end{itemize}

\noindent Now let us consider these requirements in more detail.

\subsection{Components}
In further detailing the requirements, we make the following assumptions:

\begin{itemize}

\item Each component can exist in a variety of states.

\item Sets of states will differ depending on the component

\item The chain of events starting from design/ordering/manufacture and then on to QC,
shipping, installation, testing ``in citu'' etc is reflected by the changing state of the component as recorded
in the database

\item The exact sequence of transitions depends on the exact nature of the specific  component

\item Each state transition may optionally result in a data product specific to the component and the specific transition;
one example is metrics collected during the QC procedures for CE; the exact nature, size and format of data thus produced
depends on the specific component and transition

\item Each state transition may optionally require a record in the audit trail, i.e.\,reason for the event and the entity
responsible for changing the record (a person and/or institution)

\end{itemize}

\subsection{Associations}
In further detailing the requirements, we make the following assumptions::

\begin{itemize}

\item Each component can be included in a number of associations, perhaps of different kinds; a bundle of cables
can be a part of an assembly while also representing connections between sub-assemblies

\item The exact sequence of transitions depends on the exact nature of the specific  component

\item Each state transition may optionally result in a data product specific to the component and the specific transition;
one example is metrics collected during the QC procedures for CE; the exact nature, size and format of data thus produced
depends on the specific component and transition

\item Each state transition may optionally require a record in the audit trail, i.e.\,reason for the event and the entity
responsible for changing the record (a person and/or institution)

\end{itemize}


\clearpage

\begin{thebibliography}{1}

\bibitem{hardwareDB}
{\textit{Hardware DB Wiki} \url{https://cdcvs.fnal.gov/redmine/projects/hardwaredb/wiki}}

\end{thebibliography}


\end{document}
